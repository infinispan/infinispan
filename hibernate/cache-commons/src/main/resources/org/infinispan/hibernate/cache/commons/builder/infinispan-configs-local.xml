<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Hibernate, Relational Persistence for Idiomatic Java
  ~
  ~ License: GNU Lesser General Public License (LGPL), version 2.1 or later.
  ~ See the lgpl.txt file in the root directory or <http://www.gnu.org/licenses/lgpl-2.1.html>.
  -->
<infinispan
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:infinispan:config:${infinispan.core.schema.version} http://www.infinispan.org/schemas/infinispan-config-${infinispan.core.schema.version}.xsd"
        xmlns="urn:infinispan:config:${infinispan.core.schema.version}">


   <!-- This configuration is suitable for non-clustered environments, where only single instance accesses the DB -->
   <cache-container name="SampleCacheManager" statistics="false" default-cache="the-default-cache" shutdown-hook="DEFAULT">
      <jmx duplicate-domains="true"/>

      <local-cache-configuration name="the-default-cache" statistics="false" />

      <!-- Default configuration is appropriate for entity/collection caching. -->
      <local-cache-configuration name="entity" simple-cache="true" statistics="false" statistics-available="false">
         <transaction mode="NONE" />
         <expiration max-idle="100000" interval="5000"/>
         <memory>
            <object size="10000" strategy="LRU" />
         </memory>
      </local-cache-configuration>

      <!-- A config appropriate for query caching. Does not replicate queries. -->
      <local-cache-configuration name="local-query" simple-cache="true" statistics="false" statistics-available="false">
         <transaction mode="NONE"/>
         <expiration max-idle="100000" interval="5000"/>
         <memory>
            <object size="10000" strategy="LRU" />
         </memory>
      </local-cache-configuration>

      <local-cache-configuration name="timestamps" simple-cache="true" statistics="false" statistics-available="false">
         <locking concurrency-level="1000" acquire-timeout="15000"/>
         <!-- Explicitly non transactional -->
         <transaction mode="NONE"/>
         <expiration interval="0"/>
         <!--  Don't ever evict modification timestamps -->
         <memory>
            <object strategy="NONE"/>
         </memory>
      </local-cache-configuration>

      <!-- When providing custom configuration, always make this cache local and non-transactional.
           To avoid possible leaks, use expiration (max idle time). Optimize for speed.-->
      <local-cache-configuration name="pending-puts" simple-cache="true" statistics="false" statistics-available="false">
         <transaction mode="NONE"/>
         <expiration max-idle="60000" />
      </local-cache-configuration>
   </cache-container>

</infinispan>
